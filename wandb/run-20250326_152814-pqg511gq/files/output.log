✓ wandb 초기화 성공: pqg511gq
📂 문서를 로드할 디렉토리: /Users/seonwoong/PycharmProjects/langchain_graph/data
📄 발견된 파일: ['stock_questions3.txt', 'stock_questions2.txt', 'stock_knowledge.txt', 'technical_analysis.txt', 'stock_questions.txt', 'global_markets.txt']
   확인 중: stock_questions3.txt (is_file: True, endswith .txt: True)
   ✓ 파일 읽기 성공: stock_questions3.txt (길이: 3010 자)
   확인 중: stock_questions2.txt (is_file: True, endswith .txt: True)
   ✓ 파일 읽기 성공: stock_questions2.txt (길이: 3152 자)
   확인 중: stock_knowledge.txt (is_file: True, endswith .txt: True)
   ✓ 파일 읽기 성공: stock_knowledge.txt (길이: 3066 자)
   확인 중: technical_analysis.txt (is_file: True, endswith .txt: True)
   ✓ 파일 읽기 성공: technical_analysis.txt (길이: 3750 자)
   확인 중: stock_questions.txt (is_file: True, endswith .txt: True)
   ✓ 파일 읽기 성공: stock_questions.txt (길이: 2964 자)
   확인 중: global_markets.txt (is_file: True, endswith .txt: True)
   ✓ 파일 읽기 성공: global_markets.txt (길이: 4103 자)
🔢 로드된 문서 수: 6
문서를 26개의 청크로 분할했습니다.
기존 벡터 저장소를 로드합니다(/Users/seonwoong/PycharmProjects/langchain_graph/chroma_db)...
Ollama LLM을 초기화합니다(exaone3.5:latest)...
기본 프롬프트를 사용합니다.

프롬프트 유형: default

=== Ollama RAG 시스템에 질문하기 (종료하려면 'exit' 입력) ===
특별 명령어: 'sources' - 마지막 질문에 사용된 문서 청크와 유사도 점수 표시
응답 생성 중 오류 발생: Expected embeddings to be a list of floats or ints, a list of lists, a numpy array, or a list of numpy arrays, got 주식시장이란 in query.
상세 오류: Traceback (most recent call last):
  File "/Users/seonwoong/PycharmProjects/langchain_graph/langchain/lib/python3.11/site-packages/chromadb/api/models/CollectionCommon.py", line 90, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/seonwoong/PycharmProjects/langchain_graph/langchain/lib/python3.11/site-packages/chromadb/api/models/CollectionCommon.py", line 280, in _validate_and_prepare_query_request
    query_records = normalize_base_record_set(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/seonwoong/PycharmProjects/langchain_graph/langchain/lib/python3.11/site-packages/chromadb/api/types.py", line 164, in normalize_base_record_set
    embeddings=normalize_embeddings(embeddings),
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/seonwoong/PycharmProjects/langchain_graph/langchain/lib/python3.11/site-packages/chromadb/api/types.py", line 88, in normalize_embeddings
    raise ValueError(
ValueError: Expected embeddings to be a list of floats or ints, a list of lists, a numpy array, or a list of numpy arrays, got 주식시장이란

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/seonwoong/PycharmProjects/langchain_graph/ollama_rag.py", line 353, in main
    docs_with_scores = vector_store.similarity_search_by_vector(query, k=1)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/seonwoong/PycharmProjects/langchain_graph/langchain/lib/python3.11/site-packages/langchain_chroma/vectorstores.py", line 634, in similarity_search_by_vector
    results = self.__query_collection(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/seonwoong/PycharmProjects/langchain_graph/langchain/lib/python3.11/site-packages/langchain_core/utils/utils.py", line 53, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/seonwoong/PycharmProjects/langchain_graph/langchain/lib/python3.11/site-packages/langchain_chroma/vectorstores.py", line 398, in __query_collection
    return self._collection.query(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/seonwoong/PycharmProjects/langchain_graph/langchain/lib/python3.11/site-packages/chromadb/api/models/Collection.py", line 211, in query
    query_request = self._validate_and_prepare_query_request(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/seonwoong/PycharmProjects/langchain_graph/langchain/lib/python3.11/site-packages/chromadb/api/models/CollectionCommon.py", line 93, in wrapper
    raise type(e)(msg).with_traceback(e.__traceback__)
  File "/Users/seonwoong/PycharmProjects/langchain_graph/langchain/lib/python3.11/site-packages/chromadb/api/models/CollectionCommon.py", line 90, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/seonwoong/PycharmProjects/langchain_graph/langchain/lib/python3.11/site-packages/chromadb/api/models/CollectionCommon.py", line 280, in _validate_and_prepare_query_request
    query_records = normalize_base_record_set(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/seonwoong/PycharmProjects/langchain_graph/langchain/lib/python3.11/site-packages/chromadb/api/types.py", line 164, in normalize_base_record_set
    embeddings=normalize_embeddings(embeddings),
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/seonwoong/PycharmProjects/langchain_graph/langchain/lib/python3.11/site-packages/chromadb/api/types.py", line 88, in normalize_embeddings
    raise ValueError(
ValueError: Expected embeddings to be a list of floats or ints, a list of lists, a numpy array, or a list of numpy arrays, got 주식시장이란 in query.
Traceback (most recent call last):
  File "/Users/seonwoong/PycharmProjects/langchain_graph/ollama_rag.py", line 471, in <module>
    main()
  File "/Users/seonwoong/PycharmProjects/langchain_graph/ollama_rag.py", line 341, in main
    query = input("\n질문: ")
            ^^^^^^^^^^^^^^^^^
KeyboardInterrupt
Exception ignored in atexit callback: <bound method Client.join of <posthog.client.Client object at 0x14f3bca90>>
Traceback (most recent call last):
  File "/Users/seonwoong/PycharmProjects/langchain_graph/langchain/lib/python3.11/site-packages/posthog/client.py", line 617, in join
    consumer.join()
  File "/opt/homebrew/Cellar/python@3.11/3.11.10/Frameworks/Python.framework/Versions/3.11/lib/python3.11/threading.py", line 1119, in join
    self._wait_for_tstate_lock()
  File "/opt/homebrew/Cellar/python@3.11/3.11.10/Frameworks/Python.framework/Versions/3.11/lib/python3.11/threading.py", line 1139, in _wait_for_tstate_lock
    if lock.acquire(block, timeout):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyboardInterrupt:
Exception ignored in atexit callback: <function _start_and_connect_service.<locals>.teardown_atexit at 0x15c80b600>
Traceback (most recent call last):
  File "/Users/seonwoong/PycharmProjects/langchain_graph/langchain/lib/python3.11/site-packages/wandb/sdk/lib/service_connection.py", line 94, in teardown_atexit
    conn.teardown(hooks.exit_code)
  File "/Users/seonwoong/PycharmProjects/langchain_graph/langchain/lib/python3.11/site-packages/wandb/sdk/lib/service_connection.py", line 226, in teardown
    self._router.join()
  File "/Users/seonwoong/PycharmProjects/langchain_graph/langchain/lib/python3.11/site-packages/wandb/sdk/interface/router.py", line 75, in join
    self._thread.join()
  File "/opt/homebrew/Cellar/python@3.11/3.11.10/Frameworks/Python.framework/Versions/3.11/lib/python3.11/threading.py", line 1119, in join
    self._wait_for_tstate_lock()
  File "/opt/homebrew/Cellar/python@3.11/3.11.10/Frameworks/Python.framework/Versions/3.11/lib/python3.11/threading.py", line 1139, in _wait_for_tstate_lock
    if lock.acquire(block, timeout):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyboardInterrupt:
